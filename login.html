<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-firestore.js"></script>
    <script src="fbinit.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
    <link rel="icon" href="images/log1.png">
    <link rel="stylesheet" type="text/css" href="login.css">
    <link rel="stylesheet" type="text/css" href="rsp-css/login-rsp.css">
    <title>Login</title>
  </head>
  <body>
    <div class="logo-banner">
    <img src="images/log1.png" style="height: 80px; width: 270px; margin-top: 100px;"><br>
    </div><br><br><br>

        <div class="logo-banner2">
    <img src="images/log1.png" style="height: 80px; width: 270px; margin-left: 320px; margin-top: 100px;"><br><br><br>
    </div>

        <div class="logo-banner3">
    <img src="images/log1.png" style="height: 80px; width: 270px; margin-left: 108px; margin-top: 100px;"><br>
    </div>
    
    <div class="logo">
    <img src="images/kabo.png" style="height: 80px; width: 110px; margin-left: 55px"><br>
    </div>

    <div class="logo2">
    <img src="images/kabo.png" style="height: 80px; width: 110px; margin-left: 80px"><br>
    </div>

    <div class="logo3">
    <img src="images/kabo.png" style="height: 80px; width: 110px; margin-left: 87px"><br>
    </div>

    <div class="logo4">
    <img src="images/kabo.png" style="height: 80px; width: 110px; margin-left: 100px"><br>
    </div>
    
    <div class="form-container">

      <h1>Login</h1>

    <div class="form-container">
      <input type="text" placeholder="Username" class="field" id="user" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Username'">
      <input type="password" placeholder="Password" class="field" id="pass" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Password'">
      <input type="submit" class="btn" id="submit">
    </div>

    
    <script>
      const user = document.querySelector("#user");
      const pass = document.querySelector("#pass");
      const enter = document.querySelector("#submit");

      enter.addEventListener("click", function () {
        db.collection("users").where("username", "==", user.value.trim())
          .get()
          .then(function (querySnapshot) {
            console.log(querySnapshot)
            if(querySnapshot.size!==0){
            querySnapshot.forEach(function (doc) {
              if (pass.value == doc.data().password.trim()) {
                localStorage.setItem("currentuser", doc.id);
                window.location.href = "booking.html";
              }else{
                alert("Password Incorrect")
              }
            });
          }else{
            alert("Username Incorrect")
          };
      })});
      var inputs = document.getElementsByTagName("input");
      for(i =0 ; i<inputs.length;i++){
      inputs[i].addEventListener("keyup", function (event) {
        if (event.keyCode === 13) {
        event.preventDefault();
        document.getElementById("submit").click();
    }})
      };
    </script>
<script>
      window.onload = function checkuser() {
        localStorage.setItem("currentuser","") ;
      };
</script>
  </body>
</html>
